diff a/app/Controllers/Blog.php b/app/Controllers/Blog.php	(rejected hunks)
@@ -139,19 +139,24 @@
 					session()->setFlashdata('message', 'Data entered Successfully!');
 					session()->setFlashdata('alert-class', 'alert-success');
 					
+					
+					$bid = $this->content_model->saveData($data); 
+					
 					$filearr = [];
 					if(!empty($_FILES['file'])) {	
 						foreach($_FILES['file']['tmp_name'] as $key=>$v) {	
 							if($_FILES['file']['tmp_name'][$key]){
-								$imgData = base64_encode(file_get_contents($_FILES['file']['tmp_name'][$key]));
-								$filearr[$key] = $imgData;				
+								$data = [];
+								$response = $this->Amazon_s3_model->doUpload("file", "category-file");						
+								$data['image'] = $response["filePath"];				
+								$data['blog_id'] = $bid;
+								
+								$this->content_model->saveDataInTable($data, "blog_images"); 
 							}							
 						}
-						$data['custom_assets'] = json_encode($filearr);
 						
 					}
-					$bid = $this->model->saveData($data); 
-					
+
 					if(!empty($bid) && !empty($this->request->getPost('catid'))){
 						
 						foreach($this->request->getPost('catid') as $val) {
